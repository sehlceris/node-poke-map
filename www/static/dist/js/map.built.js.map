{"version":3,"sources":["../../js/map.js"],"names":[],"mappings":"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","file":"map.built.js","sourcesContent":["//\n// Global map.js variables\n//\n\nvar $selectExclude\nvar $selectPokemonNotify\nvar $selectRarityNotify\nvar $selectStyle\nvar $selectIconResolution\nvar $selectIconSize\nvar $selectLuredPokestopsOnly\nvar $selectSearchIconMarker\n\nvar language = document.documentElement.lang === '' ? 'en' : document.documentElement.lang\nvar idToPokemon = {}\nvar i8lnDictionary = {}\nvar languageLookups = 0\nvar languageLookupThreshold = 3\n\nvar searchMarkerStyles\n\nvar excludedPokemon = []\nvar notifiedPokemon = []\nvar notifiedRarity = []\n\nvar map\nvar rawDataIsLoading = false\nvar locationMarker\nvar searchMarker\nvar storeZoom = true\n\nvar noLabelsStyle = [{\n  featureType: 'poi',\n  elementType: 'labels',\n  stylers: [{\n    visibility: 'off'\n  }]\n}, {\n  'featureType': 'all',\n  'elementType': 'labels.text.stroke',\n  'stylers': [{\n    'visibility': 'off'\n  }]\n}, {\n  'featureType': 'all',\n  'elementType': 'labels.text.fill',\n  'stylers': [{\n    'visibility': 'off'\n  }]\n}, {\n  'featureType': 'all',\n  'elementType': 'labels.icon',\n  'stylers': [{\n    'visibility': 'off'\n  }]\n}]\nvar light2Style = [{\n  'elementType': 'geometry',\n  'stylers': [{\n    'hue': '#ff4400'\n  }, {\n    'saturation': -68\n  }, {\n    'lightness': -4\n  }, {\n    'gamma': 0.72\n  }]\n}, {\n  'featureType': 'road',\n  'elementType': 'labels.icon'\n}, {\n  'featureType': 'landscape.man_made',\n  'elementType': 'geometry',\n  'stylers': [{\n    'hue': '#0077ff'\n  }, {\n    'gamma': 3.1\n  }]\n}, {\n  'featureType': 'water',\n  'stylers': [{\n    'hue': '#00ccff'\n  }, {\n    'gamma': 0.44\n  }, {\n    'saturation': -33\n  }]\n}, {\n  'featureType': 'poi.park',\n  'stylers': [{\n    'hue': '#44ff00'\n  }, {\n    'saturation': -23\n  }]\n}, {\n  'featureType': 'water',\n  'elementType': 'labels.text.fill',\n  'stylers': [{\n    'hue': '#007fff'\n  }, {\n    'gamma': 0.77\n  }, {\n    'saturation': 65\n  }, {\n    'lightness': 99\n  }]\n}, {\n  'featureType': 'water',\n  'elementType': 'labels.text.stroke',\n  'stylers': [{\n    'gamma': 0.11\n  }, {\n    'weight': 5.6\n  }, {\n    'saturation': 99\n  }, {\n    'hue': '#0091ff'\n  }, {\n    'lightness': -86\n  }]\n}, {\n  'featureType': 'transit.line',\n  'elementType': 'geometry',\n  'stylers': [{\n    'lightness': -48\n  }, {\n    'hue': '#ff5e00'\n  }, {\n    'gamma': 1.2\n  }, {\n    'saturation': -23\n  }]\n}, {\n  'featureType': 'transit',\n  'elementType': 'labels.text.stroke',\n  'stylers': [{\n    'saturation': -64\n  }, {\n    'hue': '#ff9100'\n  }, {\n    'lightness': 16\n  }, {\n    'gamma': 0.47\n  }, {\n    'weight': 2.7\n  }]\n}]\nvar darkStyle = [{\n  'featureType': 'all',\n  'elementType': 'labels.text.fill',\n  'stylers': [{\n    'saturation': 36\n  }, {\n    'color': '#b39964'\n  }, {\n    'lightness': 40\n  }]\n}, {\n  'featureType': 'all',\n  'elementType': 'labels.text.stroke',\n  'stylers': [{\n    'visibility': 'on'\n  }, {\n    'color': '#000000'\n  }, {\n    'lightness': 16\n  }]\n}, {\n  'featureType': 'all',\n  'elementType': 'labels.icon',\n  'stylers': [{\n    'visibility': 'off'\n  }]\n}, {\n  'featureType': 'administrative',\n  'elementType': 'geometry.fill',\n  'stylers': [{\n    'color': '#000000'\n  }, {\n    'lightness': 20\n  }]\n}, {\n  'featureType': 'administrative',\n  'elementType': 'geometry.stroke',\n  'stylers': [{\n    'color': '#000000'\n  }, {\n    'lightness': 17\n  }, {\n    'weight': 1.2\n  }]\n}, {\n  'featureType': 'landscape',\n  'elementType': 'geometry',\n  'stylers': [{\n    'color': '#000000'\n  }, {\n    'lightness': 20\n  }]\n}, {\n  'featureType': 'poi',\n  'elementType': 'geometry',\n  'stylers': [{\n    'color': '#000000'\n  }, {\n    'lightness': 21\n  }]\n}, {\n  'featureType': 'road.highway',\n  'elementType': 'geometry.fill',\n  'stylers': [{\n    'color': '#000000'\n  }, {\n    'lightness': 17\n  }]\n}, {\n  'featureType': 'road.highway',\n  'elementType': 'geometry.stroke',\n  'stylers': [{\n    'color': '#000000'\n  }, {\n    'lightness': 29\n  }, {\n    'weight': 0.2\n  }]\n}, {\n  'featureType': 'road.arterial',\n  'elementType': 'geometry',\n  'stylers': [{\n    'color': '#000000'\n  }, {\n    'lightness': 18\n  }]\n}, {\n  'featureType': 'road.local',\n  'elementType': 'geometry',\n  'stylers': [{\n    'color': '#181818'\n  }, {\n    'lightness': 16\n  }]\n}, {\n  'featureType': 'transit',\n  'elementType': 'geometry',\n  'stylers': [{\n    'color': '#000000'\n  }, {\n    'lightness': 19\n  }]\n}, {\n  'featureType': 'water',\n  'elementType': 'geometry',\n  'stylers': [{\n    'lightness': 17\n  }, {\n    'color': '#525252'\n  }]\n}]\nvar pGoStyle = [{\n  'featureType': 'landscape.man_made',\n  'elementType': 'geometry.fill',\n  'stylers': [{\n    'color': '#a1f199'\n  }]\n}, {\n  'featureType': 'landscape.natural.landcover',\n  'elementType': 'geometry.fill',\n  'stylers': [{\n    'color': '#37bda2'\n  }]\n}, {\n  'featureType': 'landscape.natural.terrain',\n  'elementType': 'geometry.fill',\n  'stylers': [{\n    'color': '#37bda2'\n  }]\n}, {\n  'featureType': 'poi.attraction',\n  'elementType': 'geometry.fill',\n  'stylers': [{\n    'visibility': 'on'\n  }]\n}, {\n  'featureType': 'poi.business',\n  'elementType': 'geometry.fill',\n  'stylers': [{\n    'color': '#e4dfd9'\n  }]\n}, {\n  'featureType': 'poi.business',\n  'elementType': 'labels.icon',\n  'stylers': [{\n    'visibility': 'off'\n  }]\n}, {\n  'featureType': 'poi.park',\n  'elementType': 'geometry.fill',\n  'stylers': [{\n    'color': '#37bda2'\n  }]\n}, {\n  'featureType': 'road',\n  'elementType': 'geometry.fill',\n  'stylers': [{\n    'color': '#84b09e'\n  }]\n}, {\n  'featureType': 'road',\n  'elementType': 'geometry.stroke',\n  'stylers': [{\n    'color': '#fafeb8'\n  }, {\n    'weight': '1.25'\n  }]\n}, {\n  'featureType': 'road.highway',\n  'elementType': 'labels.icon',\n  'stylers': [{\n    'visibility': 'off'\n  }]\n}, {\n  'featureType': 'water',\n  'elementType': 'geometry.fill',\n  'stylers': [{\n    'color': '#5ddad6'\n  }]\n}]\nvar light2StyleNoLabels = [{\n  'elementType': 'geometry',\n  'stylers': [{\n    'hue': '#ff4400'\n  }, {\n    'saturation': -68\n  }, {\n    'lightness': -4\n  }, {\n    'gamma': 0.72\n  }]\n}, {\n  'featureType': 'road',\n  'elementType': 'labels.icon'\n}, {\n  'featureType': 'landscape.man_made',\n  'elementType': 'geometry',\n  'stylers': [{\n    'hue': '#0077ff'\n  }, {\n    'gamma': 3.1\n  }]\n}, {\n  'featureType': 'water',\n  'stylers': [{\n    'hue': '#00ccff'\n  }, {\n    'gamma': 0.44\n  }, {\n    'saturation': -33\n  }]\n}, {\n  'featureType': 'poi.park',\n  'stylers': [{\n    'hue': '#44ff00'\n  }, {\n    'saturation': -23\n  }]\n}, {\n  'featureType': 'water',\n  'elementType': 'labels.text.fill',\n  'stylers': [{\n    'hue': '#007fff'\n  }, {\n    'gamma': 0.77\n  }, {\n    'saturation': 65\n  }, {\n    'lightness': 99\n  }]\n}, {\n  'featureType': 'water',\n  'elementType': 'labels.text.stroke',\n  'stylers': [{\n    'gamma': 0.11\n  }, {\n    'weight': 5.6\n  }, {\n    'saturation': 99\n  }, {\n    'hue': '#0091ff'\n  }, {\n    'lightness': -86\n  }]\n}, {\n  'featureType': 'transit.line',\n  'elementType': 'geometry',\n  'stylers': [{\n    'lightness': -48\n  }, {\n    'hue': '#ff5e00'\n  }, {\n    'gamma': 1.2\n  }, {\n    'saturation': -23\n  }]\n}, {\n  'featureType': 'transit',\n  'elementType': 'labels.text.stroke',\n  'stylers': [{\n    'saturation': -64\n  }, {\n    'hue': '#ff9100'\n  }, {\n    'lightness': 16\n  }, {\n    'gamma': 0.47\n  }, {\n    'weight': 2.7\n  }]\n}, {\n  'featureType': 'all',\n  'elementType': 'labels.text.stroke',\n  'stylers': [{\n    'visibility': 'off'\n  }]\n}, {\n  'featureType': 'all',\n  'elementType': 'labels.text.fill',\n  'stylers': [{\n    'visibility': 'off'\n  }]\n}, {\n  'featureType': 'all',\n  'elementType': 'labels.icon',\n  'stylers': [{\n    'visibility': 'off'\n  }]\n}]\nvar darkStyleNoLabels = [{\n  'featureType': 'all',\n  'elementType': 'labels.text.fill',\n  'stylers': [{\n    'visibility': 'off'\n  }]\n}, {\n  'featureType': 'all',\n  'elementType': 'labels.text.stroke',\n  'stylers': [{\n    'visibility': 'off'\n  }]\n}, {\n  'featureType': 'all',\n  'elementType': 'labels.icon',\n  'stylers': [{\n    'visibility': 'off'\n  }]\n}, {\n  'featureType': 'administrative',\n  'elementType': 'geometry.fill',\n  'stylers': [{\n    'color': '#000000'\n  }, {\n    'lightness': 20\n  }]\n}, {\n  'featureType': 'administrative',\n  'elementType': 'geometry.stroke',\n  'stylers': [{\n    'color': '#000000'\n  }, {\n    'lightness': 17\n  }, {\n    'weight': 1.2\n  }]\n}, {\n  'featureType': 'landscape',\n  'elementType': 'geometry',\n  'stylers': [{\n    'color': '#000000'\n  }, {\n    'lightness': 20\n  }]\n}, {\n  'featureType': 'poi',\n  'elementType': 'geometry',\n  'stylers': [{\n    'color': '#000000'\n  }, {\n    'lightness': 21\n  }]\n}, {\n  'featureType': 'road.highway',\n  'elementType': 'geometry.fill',\n  'stylers': [{\n    'color': '#000000'\n  }, {\n    'lightness': 17\n  }]\n}, {\n  'featureType': 'road.highway',\n  'elementType': 'geometry.stroke',\n  'stylers': [{\n    'color': '#000000'\n  }, {\n    'lightness': 29\n  }, {\n    'weight': 0.2\n  }]\n}, {\n  'featureType': 'road.arterial',\n  'elementType': 'geometry',\n  'stylers': [{\n    'color': '#000000'\n  }, {\n    'lightness': 18\n  }]\n}, {\n  'featureType': 'road.local',\n  'elementType': 'geometry',\n  'stylers': [{\n    'color': '#181818'\n  }, {\n    'lightness': 16\n  }]\n}, {\n  'featureType': 'transit',\n  'elementType': 'geometry',\n  'stylers': [{\n    'color': '#000000'\n  }, {\n    'lightness': 19\n  }]\n}, {\n  'featureType': 'water',\n  'elementType': 'geometry',\n  'stylers': [{\n    'lightness': 17\n  }, {\n    'color': '#525252'\n  }]\n}]\nvar pGoStyleNoLabels = [{\n  'featureType': 'landscape.man_made',\n  'elementType': 'geometry.fill',\n  'stylers': [{\n    'color': '#a1f199'\n  }]\n}, {\n  'featureType': 'landscape.natural.landcover',\n  'elementType': 'geometry.fill',\n  'stylers': [{\n    'color': '#37bda2'\n  }]\n}, {\n  'featureType': 'landscape.natural.terrain',\n  'elementType': 'geometry.fill',\n  'stylers': [{\n    'color': '#37bda2'\n  }]\n}, {\n  'featureType': 'poi.attraction',\n  'elementType': 'geometry.fill',\n  'stylers': [{\n    'visibility': 'on'\n  }]\n}, {\n  'featureType': 'poi.business',\n  'elementType': 'geometry.fill',\n  'stylers': [{\n    'color': '#e4dfd9'\n  }]\n}, {\n  'featureType': 'poi.business',\n  'elementType': 'labels.icon',\n  'stylers': [{\n    'visibility': 'off'\n  }]\n}, {\n  'featureType': 'poi.park',\n  'elementType': 'geometry.fill',\n  'stylers': [{\n    'color': '#37bda2'\n  }]\n}, {\n  'featureType': 'road',\n  'elementType': 'geometry.fill',\n  'stylers': [{\n    'color': '#84b09e'\n  }]\n}, {\n  'featureType': 'road',\n  'elementType': 'geometry.stroke',\n  'stylers': [{\n    'color': '#fafeb8'\n  }, {\n    'weight': '1.25'\n  }]\n}, {\n  'featureType': 'road.highway',\n  'elementType': 'labels.icon',\n  'stylers': [{\n    'visibility': 'off'\n  }]\n}, {\n  'featureType': 'water',\n  'elementType': 'geometry.fill',\n  'stylers': [{\n    'color': '#5ddad6'\n  }]\n}, {\n  'featureType': 'all',\n  'elementType': 'labels.text.stroke',\n  'stylers': [{\n    'visibility': 'off'\n  }]\n}, {\n  'featureType': 'all',\n  'elementType': 'labels.text.fill',\n  'stylers': [{\n    'visibility': 'off'\n  }]\n}, {\n  'featureType': 'all',\n  'elementType': 'labels.icon',\n  'stylers': [{\n    'visibility': 'off'\n  }]\n}]\n\nvar selectedStyle = 'light'\n\nvar mapData = {\n  pokemons: {},\n  gyms: {},\n  pokestops: {},\n  lurePokemons: {},\n  scanned: {},\n  spawnpoints: {}\n}\nvar gymTypes = ['Uncontested', 'Mystic', 'Valor', 'Instinct']\nvar audio = new Audio('static/sounds/ding.mp3')\nvar pokemonSprites = {\n  normal: {\n    columns: 12,\n    iconWidth: 30,\n    iconHeight: 30,\n    spriteWidth: 360,\n    spriteHeight: 390,\n    filename: 'static/icons-sprite.png',\n    name: 'Normal'\n  },\n  highres: {\n    columns: 7,\n    iconWidth: 65,\n    iconHeight: 65,\n    spriteWidth: 455,\n    spriteHeight: 1430,\n    filename: 'static/icons-large-sprite.png',\n    name: 'High-Res'\n  },\n  shuffle: {\n    columns: 7,\n    iconWidth: 65,\n    iconHeight: 65,\n    spriteWidth: 455,\n    spriteHeight: 1430,\n    filename: 'static/icons-shuffle-sprite.png',\n    name: 'Shuffle'\n  }\n}\n\n//\n// LocalStorage helpers\n//\n\nvar StoreTypes = {\n  Boolean: {\n    parse: function (str) {\n      switch (str.toLowerCase()) {\n        case '1':\n        case 'true':\n        case 'yes':\n          return true\n        default:\n          return false\n      }\n    },\n    stringify: function (b) {\n      return b ? 'true' : 'false'\n    }\n  },\n  JSON: {\n    parse: function (str) {\n      return JSON.parse(str)\n    },\n    stringify: function (json) {\n      return JSON.stringify(json)\n    }\n  },\n  String: {\n    parse: function (str) {\n      return str\n    },\n    stringify: function (str) {\n      return str\n    }\n  },\n  Number: {\n    parse: function (str) {\n      return parseInt(str, 10)\n    },\n    stringify: function (number) {\n      return number.toString()\n    }\n  }\n}\n\nvar StoreOptions = {\n  'map_style': {\n    default: 'roadmap',\n    type: StoreTypes.String\n  },\n  'remember_select_exclude': {\n    default: [],\n    type: StoreTypes.JSON\n  },\n  'remember_select_notify': {\n    default: [],\n    type: StoreTypes.JSON\n  },\n  'remember_select_rarity_notify': {\n    default: [],\n    type: StoreTypes.JSON\n  },\n  'showGyms': {\n    default: false,\n    type: StoreTypes.Boolean\n  },\n  'showPokemon': {\n    default: true,\n    type: StoreTypes.Boolean\n  },\n  'showPokestops': {\n    default: true,\n    type: StoreTypes.Boolean\n  },\n  'showLuredPokestopsOnly': {\n    default: 0,\n    type: StoreTypes.Number\n  },\n  'showScanned': {\n    default: false,\n    type: StoreTypes.Boolean\n  },\n  'showSpawnpoints': {\n    default: false,\n    type: StoreTypes.Boolean\n  },\n  'playSound': {\n    default: false,\n    type: StoreTypes.Boolean\n  },\n  'geoLocate': {\n    default: false,\n    type: StoreTypes.Boolean\n  },\n  'lockMarker': {\n    default: isTouchDevice(), // default to true if touch device\n    type: StoreTypes.Boolean\n  },\n  'startAtUserLocation': {\n    default: false,\n    type: StoreTypes.Boolean\n  },\n  'pokemonIcons': {\n    default: 'highres',\n    type: StoreTypes.String\n  },\n  'iconSizeModifier': {\n    default: 0,\n    type: StoreTypes.Number\n  },\n  'searchMarkerStyle': {\n    default: 'google',\n    type: StoreTypes.String\n  },\n  'zoomLevel': {\n    default: 16,\n    type: StoreTypes.Number\n  }\n}\n\nvar Store = {\n  getOption: function (key) {\n    var option = StoreOptions[key]\n    if (!option) {\n      throw new Error('Store key was not defined ' + key)\n    }\n    return option\n  },\n  get: function (key) {\n    var option = this.getOption(key)\n    var optionType = option.type\n    var rawValue = localStorage[key]\n    if (rawValue === null || rawValue === undefined) {\n      return option.default\n    }\n    var value = optionType.parse(rawValue)\n    return value\n  },\n  set: function (key, value) {\n    var option = this.getOption(key)\n    var optionType = option.type || StoreTypes.String\n    var rawValue = optionType.stringify(value)\n    localStorage[key] = rawValue\n  },\n  reset: function (key) {\n    localStorage.removeItem(key)\n  }\n}\n\n//\n// Functions\n//\n\nfunction excludePokemon (id) { // eslint-disable-line no-unused-vars\n  $selectExclude.val(\n    $selectExclude.val().concat(id)\n  ).trigger('change')\n}\n\nfunction notifyAboutPokemon (id) { // eslint-disable-line no-unused-vars\n  $selectPokemonNotify.val(\n    $selectPokemonNotify.val().concat(id)\n  ).trigger('change')\n}\n\nfunction removePokemonMarker (encounterId) { // eslint-disable-line no-unused-vars\n  mapData.pokemons[encounterId].marker.setMap(null)\n  mapData.pokemons[encounterId].hidden = true\n}\n\nfunction initMap () { // eslint-disable-line no-unused-vars\n  map = new google.maps.Map(document.getElementById('map'), {\n    center: {\n      lat: centerLat,\n      lng: centerLng\n    },\n    zoom: Store.get('zoomLevel'),\n    fullscreenControl: true,\n    streetViewControl: false,\n    mapTypeControl: false,\n    mapTypeControlOptions: {\n      style: google.maps.MapTypeControlStyle.DROPDOWN_MENU,\n      position: google.maps.ControlPosition.RIGHT_TOP,\n      mapTypeIds: [\n        google.maps.MapTypeId.ROADMAP,\n        google.maps.MapTypeId.SATELLITE,\n        'nolabels_style',\n        'dark_style',\n        'style_light2',\n        'style_pgo',\n        'dark_style_nl',\n        'style_light2_nl',\n        'style_pgo_nl'\n      ]\n    }\n  })\n\n  var styleNoLabels = new google.maps.StyledMapType(noLabelsStyle, {\n    name: 'No Labels'\n  })\n  map.mapTypes.set('nolabels_style', styleNoLabels)\n\n  var styleDark = new google.maps.StyledMapType(darkStyle, {\n    name: 'Dark'\n  })\n  map.mapTypes.set('dark_style', styleDark)\n\n  var styleLight2 = new google.maps.StyledMapType(light2Style, {\n    name: 'Light2'\n  })\n  map.mapTypes.set('style_light2', styleLight2)\n\n  var stylePgo = new google.maps.StyledMapType(pGoStyle, {\n    name: 'PokemonGo'\n  })\n  map.mapTypes.set('style_pgo', stylePgo)\n\n  var styleDarkNl = new google.maps.StyledMapType(darkStyleNoLabels, {\n    name: 'Dark (No Labels)'\n  })\n  map.mapTypes.set('dark_style_nl', styleDarkNl)\n\n  var styleLight2Nl = new google.maps.StyledMapType(light2StyleNoLabels, {\n    name: 'Light2 (No Labels)'\n  })\n  map.mapTypes.set('style_light2_nl', styleLight2Nl)\n\n  var stylePgoNl = new google.maps.StyledMapType(pGoStyleNoLabels, {\n    name: 'PokemonGo (No Labels)'\n  })\n  map.mapTypes.set('style_pgo_nl', stylePgoNl)\n\n  map.addListener('maptypeid_changed', function (s) {\n    Store.set('map_style', this.mapTypeId)\n  })\n\n  map.setMapTypeId(Store.get('map_style'))\n  map.addListener('idle', updateMap)\n\n  map.addListener('zoom_changed', function () {\n    if (storeZoom === true) {\n      Store.set('zoomLevel', this.getZoom())\n    } else {\n      storeZoom = true\n    }\n\n    redrawPokemon(mapData.pokemons)\n    redrawPokemon(mapData.lurePokemons)\n  })\n\n  searchMarker = createSearchMarker()\n\n  addMyLocationButton()\n  initSidebar()\n}\n\nfunction updateSearchMarker (style) {\n  if (style in searchMarkerStyles) {\n    searchMarker.setIcon(searchMarkerStyles[style].icon)\n    Store.set('searchMarkerStyle', style)\n  }\n  return searchMarker\n}\n\nfunction createSearchMarker () {\n  var searchMarker = new google.maps.Marker({ // need to keep reference.\n    position: {\n      lat: centerLat,\n      lng: centerLng\n    },\n    map: map,\n    animation: google.maps.Animation.DROP,\n    draggable: !Store.get('lockMarker'),\n    icon: null,\n    optimized: false,\n    zIndex: google.maps.Marker.MAX_ZINDEX + 1\n  })\n\n  var oldLocation = null\n  google.maps.event.addListener(searchMarker, 'dragstart', function () {\n    oldLocation = searchMarker.getPosition()\n  })\n\n  google.maps.event.addListener(searchMarker, 'dragend', function () {\n    var newLocation = searchMarker.getPosition()\n    changeSearchLocation(newLocation.lat(), newLocation.lng())\n      .done(function () {\n        oldLocation = null\n      })\n      .fail(function () {\n        if (oldLocation) {\n          searchMarker.setPosition(oldLocation)\n        }\n      })\n  })\n\n  return searchMarker\n}\n\nvar searchControlURI = 'search_control'\nfunction searchControl (action) {\n  $.post(searchControlURI + '?action=' + encodeURIComponent(action))\n}\nfunction updateSearchStatus () {\n  $.getJSON(searchControlURI).then(function (data) {\n    $('#search-switch').prop('checked', data.status)\n  })\n}\n\nfunction initSidebar () {\n  $('#gyms-switch').prop('checked', Store.get('showGyms'))\n  $('#pokemon-switch').prop('checked', Store.get('showPokemon'))\n  $('#pokestops-switch').prop('checked', Store.get('showPokestops'))\n  $('#lured-pokestops-only-switch').val(Store.get('showLuredPokestopsOnly'))\n  $('#lured-pokestops-only-wrapper').toggle(Store.get('showPokestops'))\n  $('#geoloc-switch').prop('checked', Store.get('geoLocate'))\n  $('#lock-marker-switch').prop('checked', Store.get('lockMarker'))\n  $('#start-at-user-location-switch').prop('checked', Store.get('startAtUserLocation'))\n  $('#scanned-switch').prop('checked', Store.get('showScanned'))\n  $('#spawnpoints-switch').prop('checked', Store.get('showSpawnpoints'))\n  $('#sound-switch').prop('checked', Store.get('playSound'))\n  var searchBox = new google.maps.places.SearchBox(document.getElementById('next-location'))\n  $('#next-location').css('background-color', $('#geoloc-switch').prop('checked') ? '#e0e0e0' : '#ffffff')\n\n  updateSearchStatus()\n  setInterval(updateSearchStatus, 5000)\n\n  searchBox.addListener('places_changed', function () {\n    var places = searchBox.getPlaces()\n\n    if (places.length === 0) {\n      return\n    }\n\n    var loc = places[0].geometry.location\n    changeLocation(loc.lat(), loc.lng())\n  })\n\n  var icons = $('#pokemon-icons')\n  $.each(pokemonSprites, function (key, value) {\n    icons.append($('<option></option>').attr('value', key).text(value.name))\n  })\n  icons.val((pokemonSprites[Store.get('pokemonIcons')]) ? Store.get('pokemonIcons') : 'highres')\n  $('#pokemon-icon-size').val(Store.get('iconSizeModifier'))\n}\n\nfunction pad (number) {\n  return number <= 99 ? ('0' + number).slice(-2) : number\n}\n\nfunction getTypeSpan (type) {\n  return `<span style='padding: 2px 5px; text-transform: uppercase; color: white; margin-right: 2px; border-radius: 4px; font-size: 0.8em; vertical-align: text-bottom; background-color: ${type['color']}'>${type['type']}</span>`\n}\n\nfunction pokemonLabel (name, rarity, types, disappearTime, id, latitude, longitude, encounterId) {\n  var disappearDate = new Date(disappearTime)\n  var rarityDisplay = rarity ? '(' + rarity + ')' : ''\n  var typesDisplay = ''\n  $.each(types, function (index, type) {\n    typesDisplay += getTypeSpan(type)\n  })\n\n  var contentstring = `\n    <div>\n      <b>${name}</b>\n      <span> - </span>\n      <small>\n        <a href='http://www.pokemon.com/us/pokedex/${id}' target='_blank' title='View in Pokedex'>#${id}</a>\n      </small>\n      <span> ${rarityDisplay}</span>\n      <span> - </span>\n      <small>${typesDisplay}</small>\n    </div>\n    <div>\n      Disappears at ${pad(disappearDate.getHours())}:${pad(disappearDate.getMinutes())}:${pad(disappearDate.getSeconds())}\n      <span class='label-countdown' disappears-at='${disappearTime}'>(00m00s)</span>\n    </div>\n    <div>\n      Location: ${latitude.toFixed(6)}, ${longitude.toFixed(7)}\n    </div>\n    <div>\n      <a href='javascript:excludePokemon(${id})'>Exclude</a>&nbsp;&nbsp\n      <a href='javascript:notifyAboutPokemon(${id})'>Notify</a>&nbsp;&nbsp\n      <a href='javascript:removePokemonMarker(\"${encounterId}\")'>Remove</a>&nbsp;&nbsp\n      <a href='https://www.google.com/maps/dir/Current+Location/${latitude},${longitude}?hl=en' target='_blank' title='View in Maps'>Get directions</a>\n    </div>`\n  return contentstring\n}\n\nfunction gymLabel (teamName, teamId, gymPoints, latitude, longitude) {\n  var gymColor = ['0, 0, 0, .4', '74, 138, 202, .6', '240, 68, 58, .6', '254, 217, 40, .6']\n  var str\n  if (teamId === 0) {\n    str = `\n      <div>\n        <center>\n          <div>\n            <b style='color:rgba(${gymColor[teamId]})'>${teamName}</b><br>\n            <img height='70px' style='padding: 5px;' src='static/forts/${teamName}_large.png'>\n          </div>\n          <div>\n            Location: ${latitude.toFixed(6)}, ${longitude.toFixed(7)}\n          </div>\n          <div>\n            <a href='https://www.google.com/maps/dir/Current+Location/${latitude},${longitude}?hl=en' target='_blank' title='View in Maps'>Get directions</a>\n          </div>\n        </center>\n      </div>`\n  } else {\n    var gymPrestige = [2000, 4000, 8000, 12000, 16000, 20000, 30000, 40000, 50000]\n    var gymLevel = 1\n    while (gymPoints >= gymPrestige[gymLevel - 1]) {\n      gymLevel++\n    }\n    str = `\n      <div>\n        <center>\n          <div style='padding-bottom: 2px'>\n            Gym owned by:\n          </div>\n          <div>\n            <b style='color:rgba(${gymColor[teamId]})'>Team ${teamName}</b><br>\n            <img height='70px' style='padding: 5px;' src='static/forts/${teamName}_large.png'>\n          </div>\n          <div>\n            Level: ${gymLevel} | Prestige: ${gymPoints}\n          </div>\n          <div>\n            Location: ${latitude.toFixed(6)}, ${longitude.toFixed(7)}\n          </div>\n          <div>\n            <a href='https://www.google.com/maps/dir/Current+Location/${latitude},${longitude}?hl=en' target='_blank' title='View in Maps'>Get directions</a>\n          </div>\n        </center>\n      </div>`\n  }\n\n  return str\n}\n\nfunction pokestopLabel (expireTime, latitude, longitude) {\n  var str\n  if (expireTime) {\n    var expireDate = new Date(expireTime)\n\n    str = `\n      <div>\n        <b>Lured Pokéstop</b>\n      </div>\n      <div>\n        Lure expires at ${pad(expireDate.getHours())}:${pad(expireDate.getMinutes())}:${pad(expireDate.getSeconds())}\n        <span class='label-countdown' disappears-at='${expireTime}'>(00m00s)</span>\n      </div>\n      <div>\n        Location: ${latitude.toFixed(6)}, ${longitude.toFixed(7)}\n      </div>\n      <div>\n        <a href='https://www.google.com/maps/dir/Current+Location/${latitude},${longitude}?hl=en' target='_blank' title='View in Maps'>Get directions</a>\n      </div>`\n  } else {\n    str = `\n      <div>\n        <b>Pokéstop</b>\n      </div>\n      <div>\n        Location: ${latitude.toFixed(6)}, ${longitude.toFixed(7)}\n      </div>\n      <div>\n        <a href='https://www.google.com/maps/dir/Current+Location/${latitude},${longitude}?hl=en' target='_blank' title='View in Maps'>Get directions</a>\n      </div>`\n  }\n\n  return str\n}\n\nfunction getGoogleSprite (index, sprite, displayHeight) {\n  displayHeight = Math.max(displayHeight, 3)\n  var scale = displayHeight / sprite.iconHeight\n  // Crop icon just a tiny bit to avoid bleedover from neighbor\n  var scaledIconSize = new google.maps.Size(scale * sprite.iconWidth - 1, scale * sprite.iconHeight - 1)\n  var scaledIconOffset = new google.maps.Point(\n    (index % sprite.columns) * sprite.iconWidth * scale + 0.5,\n    Math.floor(index / sprite.columns) * sprite.iconHeight * scale + 0.5)\n  var scaledSpriteSize = new google.maps.Size(scale * sprite.spriteWidth, scale * sprite.spriteHeight)\n  var scaledIconCenterOffset = new google.maps.Point(scale * sprite.iconWidth / 2, scale * sprite.iconHeight / 2)\n\n  return {\n    url: sprite.filename,\n    size: scaledIconSize,\n    scaledSize: scaledSpriteSize,\n    origin: scaledIconOffset,\n    anchor: scaledIconCenterOffset\n  }\n}\n\nfunction setupPokemonMarker (item, skipNotification, isBounceDisabled) {\n  // Scale icon size up with the map exponentially\n  var iconSize = 2 + (map.getZoom() - 3) * (map.getZoom() - 3) * 0.2 + Store.get('iconSizeModifier')\n  var pokemonIndex = item['pokemon_id'] - 1\n  var sprite = pokemonSprites[Store.get('pokemonIcons')] || pokemonSprites['highres']\n  var icon = getGoogleSprite(pokemonIndex, sprite, iconSize)\n\n  var animationDisabled = false\n  if (isBounceDisabled === true) {\n    animationDisabled = true\n  }\n\n  var marker = new google.maps.Marker({\n    position: {\n      lat: item['latitude'],\n      lng: item['longitude']\n    },\n    zIndex: 9999,\n    map: map,\n    icon: icon,\n    animationDisabled: animationDisabled\n  })\n\n  marker.addListener('click', function () {\n    this.setAnimation(null)\n    this.animationDisabled = true\n  })\n\n  marker.infoWindow = new google.maps.InfoWindow({\n    content: pokemonLabel(item['pokemon_name'], item['pokemon_rarity'], item['pokemon_types'], item['disappear_time'], item['pokemon_id'], item['latitude'], item['longitude'], item['encounter_id']),\n    disableAutoPan: true\n  })\n\n  if (notifiedPokemon.indexOf(item['pokemon_id']) > -1 || notifiedRarity.indexOf(item['pokemon_rarity']) > -1) {\n    if (!skipNotification) {\n      if (Store.get('playSound')) {\n        audio.play()\n      }\n      sendNotification('A wild ' + item['pokemon_name'] + ' appeared!', 'Click to load map', 'static/icons/' + item['pokemon_id'] + '.png', item['latitude'], item['longitude'])\n    }\n    if (marker.animationDisabled !== true) {\n      marker.setAnimation(google.maps.Animation.BOUNCE)\n    }\n  }\n\n  addListeners(marker)\n  return marker\n}\n\nfunction setupGymMarker (item) {\n  var marker = new google.maps.Marker({\n    position: {\n      lat: item['latitude'],\n      lng: item['longitude']\n    },\n    map: map,\n    icon: 'static/forts/' + gymTypes[item['team_id']] + '.png'\n  })\n\n  marker.infoWindow = new google.maps.InfoWindow({\n    content: gymLabel(gymTypes[item['team_id']], item['team_id'], item['gym_points'], item['latitude'], item['longitude']),\n    disableAutoPan: true\n  })\n\n  addListeners(marker)\n  return marker\n}\n\nfunction updateGymMarker (item, marker) {\n  marker.setIcon('static/forts/' + gymTypes[item['team_id']] + '.png')\n  marker.infoWindow.setContent(gymLabel(gymTypes[item['team_id']], item['team_id'], item['gym_points'], item['latitude'], item['longitude']))\n  return marker\n}\n\nfunction setupPokestopMarker (item) {\n  var imagename = item['lure_expiration'] ? 'PstopLured' : 'Pstop'\n  var marker = new google.maps.Marker({\n    position: {\n      lat: item['latitude'],\n      lng: item['longitude']\n    },\n    map: map,\n    zIndex: 2,\n    icon: 'static/forts/' + imagename + '.png'\n  })\n\n  marker.infoWindow = new google.maps.InfoWindow({\n    content: pokestopLabel(item['lure_expiration'], item['latitude'], item['longitude']),\n    disableAutoPan: true\n  })\n\n  addListeners(marker)\n  return marker\n}\n\nfunction getColorByDate (value) {\n  // Changes the color from red to green over 15 mins\n  var diff = (Date.now() - value) / 1000 / 60 / 15\n\n  if (diff > 1) {\n    diff = 1\n  }\n\n  // value from 0 to 1 - Green to Red\n  var hue = ((1 - diff) * 120).toString(10)\n  return ['hsl(', hue, ',100%,50%)'].join('')\n}\n\nfunction setupScannedMarker (item) {\n  var circleCenter = new google.maps.LatLng(item['latitude'], item['longitude'])\n\n  var marker = new google.maps.Circle({\n    map: map,\n    clickable: false,\n    center: circleCenter,\n    radius: 70, // metres\n    fillColor: getColorByDate(item['last_modified']),\n    strokeWeight: 1\n  })\n\n  return marker\n}\n\nfunction setupSpawnpointMarker (item) {\n  var circleCenter = new google.maps.LatLng(item['latitude'], item['longitude'])\n\n  var marker = new google.maps.Circle({\n    map: map,\n    clickable: false,\n    center: circleCenter,\n    radius: 5, // metres\n    fillColor: 'blue',\n    strokeWeight: 1\n  })\n\n  return marker\n}\n\nfunction clearSelection () {\n  if (document.selection) {\n    document.selection.empty()\n  } else if (window.getSelection) {\n    window.getSelection().removeAllRanges()\n  }\n}\n\nfunction addListeners (marker) {\n  marker.addListener('click', function () {\n    marker.infoWindow.open(map, marker)\n    clearSelection()\n    updateLabelDiffTime()\n    marker.persist = true\n  })\n\n  google.maps.event.addListener(marker.infoWindow, 'closeclick', function () {\n    marker.persist = null\n  })\n\n  marker.addListener('mouseover', function () {\n    marker.infoWindow.open(map, marker)\n    clearSelection()\n    updateLabelDiffTime()\n  })\n\n  marker.addListener('mouseout', function () {\n    if (!marker.persist) {\n      marker.infoWindow.close()\n    }\n  })\n\n  return marker\n}\n\nfunction clearStaleMarkers () {\n  $.each(mapData.pokemons, function (key, value) {\n    if (mapData.pokemons[key]['disappear_time'] < new Date().getTime() ||\n      excludedPokemon.indexOf(mapData.pokemons[key]['pokemon_id']) >= 0) {\n      mapData.pokemons[key].marker.setMap(null)\n      delete mapData.pokemons[key]\n    }\n  })\n\n  $.each(mapData.lurePokemons, function (key, value) {\n    if (mapData.lurePokemons[key]['lure_expiration'] < new Date().getTime() ||\n      excludedPokemon.indexOf(mapData.lurePokemons[key]['pokemon_id']) >= 0) {\n      mapData.lurePokemons[key].marker.setMap(null)\n      delete mapData.lurePokemons[key]\n    }\n  })\n\n  $.each(mapData.scanned, function (key, value) {\n    // If older than 15mins remove\n    if (mapData.scanned[key]['last_modified'] < (new Date().getTime() - 15 * 60 * 1000)) {\n      mapData.scanned[key].marker.setMap(null)\n      delete mapData.scanned[key]\n    }\n  })\n}\n\nfunction showInBoundsMarkers (markers) {\n  $.each(markers, function (key, value) {\n    var marker = markers[key].marker\n    var show = false\n    if (!markers[key].hidden) {\n      if (typeof marker.getBounds === 'function') {\n        if (map.getBounds().intersects(marker.getBounds())) {\n          show = true\n        }\n      } else if (typeof marker.getPosition === 'function') {\n        if (map.getBounds().contains(marker.getPosition())) {\n          show = true\n        }\n      }\n    }\n\n    if (show && !marker.getMap()) {\n      marker.setMap(map)\n      // Not all markers can be animated (ex: scan locations)\n      if (marker.setAnimation && marker.oldAnimation) {\n        marker.setAnimation(marker.oldAnimation)\n      }\n    } else if (!show && marker.getMap()) {\n      // Not all markers can be animated (ex: scan locations)\n      if (marker.getAnimation) {\n        marker.oldAnimation = marker.getAnimation()\n      }\n      marker.setMap(null)\n    }\n  })\n}\n\nfunction loadRawData () {\n  var loadPokemon = Store.get('showPokemon')\n  var loadGyms = Store.get('showGyms')\n  var loadPokestops = Store.get('showPokestops')\n  var loadScanned = Store.get('showScanned')\n  var loadSpawnpoints = Store.get('showSpawnpoints')\n\n  var bounds = map.getBounds()\n  var swPoint = bounds.getSouthWest()\n  var nePoint = bounds.getNorthEast()\n  var swLat = swPoint.lat()\n  var swLng = swPoint.lng()\n  var neLat = nePoint.lat()\n  var neLng = nePoint.lng()\n\n  return $.ajax({\n    url: 'raw_data',\n    type: 'GET',\n    data: {\n      'pokemon': loadPokemon,\n      'pokestops': loadPokestops,\n      'gyms': loadGyms,\n      'scanned': loadScanned,\n      'spawnpoints': loadSpawnpoints,\n      'swLat': swLat,\n      'swLng': swLng,\n      'neLat': neLat,\n      'neLng': neLng\n    },\n    dataType: 'json',\n    cache: false,\n    beforeSend: function () {\n      if (rawDataIsLoading) {\n        return false\n      } else {\n        rawDataIsLoading = true\n      }\n    },\n    complete: function () {\n      rawDataIsLoading = false\n    }\n  })\n}\n\nfunction processPokemons (i, item) {\n  if (!Store.get('showPokemon')) {\n    return false // in case the checkbox was unchecked in the meantime.\n  }\n\n  if (!(item['encounter_id'] in mapData.pokemons) &&\n    excludedPokemon.indexOf(item['pokemon_id']) < 0) {\n    // add marker to map and item to dict\n    if (item.marker) {\n      item.marker.setMap(null)\n    }\n    if (!item.hidden) {\n      item.marker = setupPokemonMarker(item)\n      mapData.pokemons[item['encounter_id']] = item\n    }\n  }\n}\n\nfunction processPokestops (i, item) {\n  if (!Store.get('showPokestops')) {\n    return false\n  }\n\n  if (Store.get('showLuredPokestopsOnly') && !item['lure_expiration']) {\n    if (mapData.pokestops[item['pokestop_id']] && mapData.pokestops[item['pokestop_id']].marker) {\n      mapData.pokestops[item['pokestop_id']].marker.setMap(null)\n      delete mapData.pokestops[item['pokestop_id']]\n    }\n    return true\n  }\n\n  if (!mapData.pokestops[item['pokestop_id']]) { // add marker to map and item to dict\n    // add marker to map and item to dict\n    if (item.marker) {\n      item.marker.setMap(null)\n    }\n    item.marker = setupPokestopMarker(item)\n    mapData.pokestops[item['pokestop_id']] = item\n  } else {\n    var item2 = mapData.pokestops[item['pokestop_id']]\n    if (!!item['lure_expiration'] !== !!item2['lure_expiration']) {\n      item2.marker.setMap(null)\n      item.marker = setupPokestopMarker(item)\n      mapData.pokestops[item['pokestop_id']] = item\n    }\n  }\n}\n\nfunction processGyms (i, item) {\n  if (!Store.get('showGyms')) {\n    return false // in case the checkbox was unchecked in the meantime.\n  }\n\n  if (item['gym_id'] in mapData.gyms) {\n    item.marker = updateGymMarker(item, mapData.gyms[item['gym_id']].marker)\n  } else { // add marker to map and item to dict\n    item.marker = setupGymMarker(item)\n  }\n  mapData.gyms[item['gym_id']] = item\n}\n\nfunction processScanned (i, item) {\n  if (!Store.get('showScanned')) {\n    return false\n  }\n\n  var scanId = item['latitude'] + '|' + item['longitude']\n\n  if (scanId in mapData.scanned) {\n    mapData.scanned[scanId].marker.setOptions({\n      fillColor: getColorByDate(item['last_modified'])\n    })\n  } else { // add marker to map and item to dict\n    if (item.marker) {\n      item.marker.setMap(null)\n    }\n    item.marker = setupScannedMarker(item)\n    mapData.scanned[scanId] = item\n  }\n}\n\nfunction processSpawnpoints (i, item) {\n  if (!Store.get('showSpawnpoints')) {\n    return false\n  }\n\n  var id = item['spawnpoint_id']\n\n  if (id in mapData.spawnpoints) {\n    // In the future: maybe show how long till spawnpoint activates?\n  } else { // add marker to map and item to dict\n    if (item.marker) {\n      item.marker.setMap(null)\n    }\n    item.marker = setupSpawnpointMarker(item)\n    mapData.spawnpoints[id] = item\n  }\n}\n\nfunction updateMap () {\n  loadRawData().done(function (result) {\n    $.each(result.pokemons, processPokemons)\n    $.each(result.pokestops, processPokestops)\n    $.each(result.gyms, processGyms)\n    $.each(result.scanned, processScanned)\n    $.each(result.spawnpoints, processSpawnpoints)\n    showInBoundsMarkers(mapData.pokemons)\n    showInBoundsMarkers(mapData.lurePokemons)\n    showInBoundsMarkers(mapData.gyms)\n    showInBoundsMarkers(mapData.pokestops)\n    showInBoundsMarkers(mapData.scanned)\n    showInBoundsMarkers(mapData.spawnpoints)\n    clearStaleMarkers()\n    if ($('#stats').hasClass('visible')) {\n      countMarkers()\n    }\n  })\n}\n\nfunction redrawPokemon (pokemonList) {\n  var skipNotification = true\n  $.each(pokemonList, function (key, value) {\n    var item = pokemonList[key]\n    if (!item.hidden) {\n      var newMarker = setupPokemonMarker(item, skipNotification, this.marker.animationDisabled)\n      item.marker.setMap(null)\n      pokemonList[key].marker = newMarker\n    }\n  })\n}\n\nvar updateLabelDiffTime = function () {\n  $('.label-countdown').each(function (index, element) {\n    var disappearsAt = new Date(parseInt(element.getAttribute('disappears-at')))\n    var now = new Date()\n\n    var difference = Math.abs(disappearsAt - now)\n    var hours = Math.floor(difference / 36e5)\n    var minutes = Math.floor((difference - (hours * 36e5)) / 6e4)\n    var seconds = Math.floor((difference - (hours * 36e5) - (minutes * 6e4)) / 1e3)\n    var timestring = ''\n\n    if (disappearsAt < now) {\n      timestring = '(expired)'\n    } else {\n      timestring = '('\n      if (hours > 0) {\n        timestring = hours + 'h'\n      }\n\n      timestring += ('0' + minutes).slice(-2) + 'm'\n      timestring += ('0' + seconds).slice(-2) + 's'\n      timestring += ')'\n    }\n\n    $(element).text(timestring)\n  })\n}\n\nfunction getPointDistance (pointA, pointB) {\n  return google.maps.geometry.spherical.computeDistanceBetween(pointA, pointB)\n}\n\nfunction sendNotification (title, text, icon, lat, lng) {\n  if (!('Notification' in window)) {\n    return false // Notifications are not present in browser\n  }\n\n  if (Notification.permission !== 'granted') {\n    Notification.requestPermission()\n  } else {\n    var notification = new Notification(title, {\n      icon: icon,\n      body: text,\n      sound: 'sounds/ding.mp3'\n    })\n\n    notification.onclick = function () {\n      window.focus()\n      notification.close()\n\n      centerMap(lat, lng, 20)\n    }\n  }\n}\n\nfunction myLocationButton (map, marker) {\n  var locationContainer = document.createElement('div')\n\n  var locationButton = document.createElement('button')\n  locationButton.style.backgroundColor = '#fff'\n  locationButton.style.border = 'none'\n  locationButton.style.outline = 'none'\n  locationButton.style.width = '28px'\n  locationButton.style.height = '28px'\n  locationButton.style.borderRadius = '2px'\n  locationButton.style.boxShadow = '0 1px 4px rgba(0,0,0,0.3)'\n  locationButton.style.cursor = 'pointer'\n  locationButton.style.marginRight = '10px'\n  locationButton.style.padding = '0px'\n  locationButton.title = 'Your Location'\n  locationContainer.appendChild(locationButton)\n\n  var locationIcon = document.createElement('div')\n  locationIcon.style.margin = '5px'\n  locationIcon.style.width = '18px'\n  locationIcon.style.height = '18px'\n  locationIcon.style.backgroundImage = 'url(static/mylocation-sprite-1x.png)'\n  locationIcon.style.backgroundSize = '180px 18px'\n  locationIcon.style.backgroundPosition = '0px 0px'\n  locationIcon.style.backgroundRepeat = 'no-repeat'\n  locationIcon.id = 'current-location'\n  locationButton.appendChild(locationIcon)\n\n  locationButton.addEventListener('click', function () {\n    centerMapOnLocation()\n  })\n\n  locationContainer.index = 1\n  map.controls[google.maps.ControlPosition.RIGHT_BOTTOM].push(locationContainer)\n}\n\nfunction centerMapOnLocation () {\n  var currentLocation = document.getElementById('current-location')\n  var imgX = '0'\n  var animationInterval = setInterval(function () {\n    if (imgX === '-18') {\n      imgX = '0'\n    } else {\n      imgX = '-18'\n    }\n    currentLocation.style.backgroundPosition = imgX + 'px 0'\n  }, 500)\n  if (navigator.geolocation) {\n    navigator.geolocation.getCurrentPosition(function (position) {\n      var latlng = new google.maps.LatLng(position.coords.latitude, position.coords.longitude)\n      locationMarker.setVisible(true)\n      locationMarker.setOptions({\n        'opacity': 1\n      })\n      locationMarker.setPosition(latlng)\n      map.setCenter(latlng)\n      clearInterval(animationInterval)\n      currentLocation.style.backgroundPosition = '-144px 0px'\n    })\n  } else {\n    clearInterval(animationInterval)\n    currentLocation.style.backgroundPosition = '0px 0px'\n  }\n}\n\nfunction addMyLocationButton () {\n  locationMarker = new google.maps.Marker({\n    map: map,\n    animation: google.maps.Animation.DROP,\n    position: {\n      lat: centerLat,\n      lng: centerLng\n    },\n    icon: {\n      path: google.maps.SymbolPath.CIRCLE,\n      fillOpacity: 1,\n      fillColor: '#1c8af6',\n      scale: 6,\n      strokeColor: '#1c8af6',\n      strokeWeight: 8,\n      strokeOpacity: 0.3\n    }\n  })\n  locationMarker.setVisible(false)\n\n  myLocationButton(map, locationMarker)\n\n  google.maps.event.addListener(map, 'dragend', function () {\n    var currentLocation = document.getElementById('current-location')\n    currentLocation.style.backgroundPosition = '0px 0px'\n    locationMarker.setOptions({\n      'opacity': 0.5\n    })\n  })\n}\n\nfunction changeLocation (lat, lng) {\n  var loc = new google.maps.LatLng(lat, lng)\n  changeSearchLocation(lat, lng).done(function () {\n    map.setCenter(loc)\n    searchMarker.setPosition(loc)\n  })\n}\n\nfunction changeSearchLocation (lat, lng) {\n  return $.post('next_loc?lat=' + lat + '&lon=' + lng, {})\n}\n\nfunction centerMap (lat, lng, zoom) {\n  var loc = new google.maps.LatLng(lat, lng)\n\n  map.setCenter(loc)\n\n  if (zoom) {\n    storeZoom = false\n    map.setZoom(zoom)\n  }\n}\n\nfunction i8ln (word) {\n  if ($.isEmptyObject(i8lnDictionary) && language !== 'en' && languageLookups < languageLookupThreshold) {\n    $.ajax({\n      url: 'static/dist/locales/' + language + '.min.json',\n      dataType: 'json',\n      async: false,\n      success: function (data) {\n        i8lnDictionary = data\n      },\n      error: function (jqXHR, status, error) {\n        console.log('Error loading i8ln dictionary: ' + error)\n        languageLookups++\n      }\n    })\n  }\n  if (word in i8lnDictionary) {\n    return i8lnDictionary[word]\n  } else {\n    // Word doesn't exist in dictionary return it as is\n    return word\n  }\n}\n\nfunction isTouchDevice () {\n  // Should cover most browsers\n  return 'ontouchstart' in window || navigator.maxTouchPoints\n}\n\n//\n// Page Ready Exection\n//\n\n$(function () {\n  if (!Notification) {\n    console.log('could not load notifications')\n    return\n  }\n\n  if (Notification.permission !== 'granted') {\n    Notification.requestPermission()\n  }\n})\n\n$(function () {\n  // populate Navbar Style menu\n  $selectStyle = $('#map-style')\n\n  // Load Stylenames, translate entries, and populate lists\n  $.getJSON('static/dist/data/mapstyle.min.json').done(function (data) {\n    var styleList = []\n\n    $.each(data, function (key, value) {\n      styleList.push({\n        id: key,\n        text: i8ln(value)\n      })\n    })\n\n    // setup the stylelist\n    $selectStyle.select2({\n      placeholder: 'Select Style',\n      data: styleList,\n      minimumResultsForSearch: Infinity\n    })\n\n    // setup the list change behavior\n    $selectStyle.on('change', function (e) {\n      selectedStyle = $selectStyle.val()\n      map.setMapTypeId(selectedStyle)\n      Store.set('map_style', selectedStyle)\n    })\n\n    // recall saved mapstyle\n    $selectStyle.val(Store.get('map_style')).trigger('change')\n  })\n\n  $selectIconResolution = $('#pokemon-icons')\n\n  $selectIconResolution.select2({\n    placeholder: 'Select Icon Resolution',\n    minimumResultsForSearch: Infinity\n  })\n\n  $selectIconResolution.on('change', function () {\n    Store.set('pokemonIcons', this.value)\n    redrawPokemon(mapData.pokemons)\n    redrawPokemon(mapData.lurePokemons)\n  })\n\n  $selectIconSize = $('#pokemon-icon-size')\n\n  $selectIconSize.select2({\n    placeholder: 'Select Icon Size',\n    minimumResultsForSearch: Infinity\n  })\n\n  $selectIconSize.on('change', function () {\n    Store.set('iconSizeModifier', this.value)\n    redrawPokemon(mapData.pokemons)\n    redrawPokemon(mapData.lurePokemons)\n  })\n\n  $selectLuredPokestopsOnly = $('#lured-pokestops-only-switch')\n\n  $selectLuredPokestopsOnly.select2({\n    placeholder: 'Only Show Lured Pokestops',\n    minimumResultsForSearch: Infinity\n  })\n\n  $selectLuredPokestopsOnly.on('change', function () {\n    Store.set('showLuredPokestopsOnly', this.value)\n    updateMap()\n  })\n\n  $selectSearchIconMarker = $('#iconmarker-style')\n\n  $.getJSON('static/dist/data/searchmarkerstyle.min.json').done(function (data) {\n    searchMarkerStyles = data\n    var searchMarkerStyleList = []\n\n    $.each(data, function (key, value) {\n      searchMarkerStyleList.push({\n        id: key,\n        text: value.name\n      })\n    })\n\n    $selectSearchIconMarker.select2({\n      placeholder: 'Select Icon Marker',\n      data: searchMarkerStyleList,\n      minimumResultsForSearch: Infinity\n    })\n\n    $selectSearchIconMarker.on('change', function (e) {\n      var selectSearchIconMarker = $selectSearchIconMarker.val()\n      Store.set('searchMarkerStyle', selectSearchIconMarker)\n      updateSearchMarker(selectSearchIconMarker)\n    })\n\n    $selectSearchIconMarker.val(Store.get('searchMarkerStyle')).trigger('change')\n\n    updateSearchMarker(Store.get('lockMarker'))\n  })\n})\n\n$(function () {\n  function formatState (state) {\n    if (!state.id) {\n      return state.text\n    }\n    var $state = $(\n      '<span><i class=\"pokemon-sprite n' + state.element.value.toString() + '\"></i> ' + state.text + '</span>'\n    )\n    return $state\n  }\n\n  if (Store.get('startAtUserLocation')) {\n    centerMapOnLocation()\n  }\n\n  $selectExclude = $('#exclude-pokemon')\n  $selectPokemonNotify = $('#notify-pokemon')\n  $selectRarityNotify = $('#notify-rarity')\n  var numberOfPokemon = 151\n\n  // Load pokemon names and populate lists\n  $.getJSON('static/dist/data/pokemon.min.json').done(function (data) {\n    var pokeList = []\n\n    $.each(data, function (key, value) {\n      if (key > numberOfPokemon) {\n        return false\n      }\n      var _types = []\n      pokeList.push({\n        id: key,\n        text: i8ln(value['name']) + ' - #' + key\n      })\n      value['name'] = i8ln(value['name'])\n      value['rarity'] = i8ln(value['rarity'])\n      $.each(value['types'], function (key, pokemonType) {\n        _types.push({\n          'type': i8ln(pokemonType['type']),\n          'color': pokemonType['color']\n        })\n      })\n      value['types'] = _types\n      idToPokemon[key] = value\n    })\n\n    // setup the filter lists\n    $selectExclude.select2({\n      placeholder: i8ln('Select Pokémon'),\n      data: pokeList,\n      templateResult: formatState\n    })\n    $selectPokemonNotify.select2({\n      placeholder: i8ln('Select Pokémon'),\n      data: pokeList,\n      templateResult: formatState\n    })\n    $selectRarityNotify.select2({\n      placeholder: i8ln('Select Rarity'),\n      data: [i8ln('Common'), i8ln('Uncommon'), i8ln('Rare'), i8ln('Very Rare'), i8ln('Ultra Rare')],\n      templateResult: formatState\n    })\n\n    // setup list change behavior now that we have the list to work from\n    $selectExclude.on('change', function (e) {\n      excludedPokemon = $selectExclude.val().map(Number)\n      clearStaleMarkers()\n      Store.set('remember_select_exclude', excludedPokemon)\n    })\n    $selectPokemonNotify.on('change', function (e) {\n      notifiedPokemon = $selectPokemonNotify.val().map(Number)\n      Store.set('remember_select_notify', notifiedPokemon)\n    })\n    $selectRarityNotify.on('change', function (e) {\n      notifiedRarity = $selectRarityNotify.val().map(String)\n      Store.set('remember_select_rarity_notify', notifiedRarity)\n    })\n\n    // recall saved lists\n    $selectExclude.val(Store.get('remember_select_exclude')).trigger('change')\n    $selectPokemonNotify.val(Store.get('remember_select_notify')).trigger('change')\n    $selectRarityNotify.val(Store.get('remember_select_rarity_notify')).trigger('change')\n  })\n\n  // run interval timers to regularly update map and timediffs\n  window.setInterval(updateLabelDiffTime, 1000)\n  window.setInterval(updateMap, 5000)\n  window.setInterval(function () {\n    if (navigator.geolocation && Store.get('geoLocate')) {\n      navigator.geolocation.getCurrentPosition(function (position) {\n        var baseURL = location.protocol + '//' + location.hostname + (location.port ? ':' + location.port : '')\n        var lat = position.coords.latitude\n        var lon = position.coords.longitude\n\n        // the search function makes any small movements cause a loop. Need to increase resolution\n        if (getPointDistance(searchMarker.getPosition(), (new google.maps.LatLng(lat, lon))) > 40) {\n          $.post(baseURL + '/next_loc?lat=' + lat + '&lon=' + lon).done(function () {\n            var center = new google.maps.LatLng(lat, lon)\n            map.panTo(center)\n            searchMarker.setPosition(center)\n          })\n        }\n      })\n    }\n  }, 1000)\n\n  // Wipe off/restore map icons when switches are toggled\n  function buildSwitchChangeListener (data, dataType, storageKey) {\n    return function () {\n      Store.set(storageKey, this.checked)\n      if (this.checked) {\n        updateMap()\n      } else {\n        $.each(dataType, function (d, dType) {\n          $.each(data[dType], function (key, value) {\n            data[dType][key].marker.setMap(null)\n          })\n          data[dType] = {}\n        })\n      }\n    }\n  }\n\n  // Setup UI element interactions\n  $('#gyms-switch').change(buildSwitchChangeListener(mapData, ['gyms'], 'showGyms'))\n  $('#pokemon-switch').change(buildSwitchChangeListener(mapData, ['pokemons'], 'showPokemon'))\n  $('#scanned-switch').change(buildSwitchChangeListener(mapData, ['scanned'], 'showScanned'))\n  $('#spawnpoints-switch').change(buildSwitchChangeListener(mapData, ['spawnpoints'], 'showSpawnpoints'))\n\n  $('#pokestops-switch').change(function () {\n    var options = {\n      'duration': 500\n    }\n    var wrapper = $('#lured-pokestops-only-wrapper')\n    if (this.checked) {\n      wrapper.show(options)\n    } else {\n      wrapper.hide(options)\n    }\n    return buildSwitchChangeListener(mapData, ['pokestops'], 'showPokestops').bind(this)()\n  })\n\n  $('#sound-switch').change(function () {\n    Store.set('playSound', this.checked)\n  })\n\n  $('#geoloc-switch').change(function () {\n    $('#next-location').prop('disabled', this.checked)\n    $('#next-location').css('background-color', this.checked ? '#e0e0e0' : '#ffffff')\n    if (!navigator.geolocation) {\n      this.checked = false\n    } else {\n      Store.set('geoLocate', this.checked)\n    }\n  })\n\n  $('#lock-marker-switch').change(function () {\n    Store.set('lockMarker', this.checked)\n    searchMarker.setDraggable(!this.checked)\n  })\n\n  $('#search-switch').change(function () {\n    searchControl(this.checked ? 'on' : 'off')\n  })\n\n  $('#start-at-user-location-switch').change(function () {\n    Store.set('startAtUserLocation', this.checked)\n  })\n\n  if ($('#nav-accordion').length) {\n    $('#nav-accordion').accordion({\n      active: 0,\n      collapsible: true,\n      heightStyle: 'content'\n    })\n  }\n})\n"]}